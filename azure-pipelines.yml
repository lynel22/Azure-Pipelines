# azure-pipelines.yml
trigger:
- main

pool:
  name: Default
  demands:
    - agent.name -equals azure-agent

steps:
- task: UseNode@1
  inputs:
    version: '16.x'

- script: npm install
  displayName: 'Instalar dependencias'

- script: npm test
  displayName: 'Ejecutar pruebas'

- script: npm run build
  displayName: 'Construir aplicaci√≥n'

- task: PublishBuildArtifacts@1
  inputs:
    pathToPublish: $(Build.ArtifactStagingDirectory)
    artifactName: drop
    publishLocation: 'Container'

- task: AzureWebApp@1
  inputs:
    azureSubscription: 7d7b983b-8c2d-4580-8db1-61a826f567c6
    appType: 'webAppLinux'
    appName: 'testAzure'
    package: '$(Build.ArtifactStagingDirectory)' 
